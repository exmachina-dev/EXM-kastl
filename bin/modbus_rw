#!/usr/bin/env python3
# -*- coding: utf-8 -*-

from ertza.remotes.modbus import ModbusBackend
from ertza.utils import FakeConfig

def main():
    mb = ModbusBackend(FakeConfig(), None, None, None)
    mb.device = '/dev/ttyO5'

    print(mb.dump_config())
    mb.connect()
    mb.write_comm(1, 1)
    mb.write_comm(2, 10)
    for i in range(1, 6):
        print(mb.read_comm(i))

if __name__ == "__main__":
    main()
